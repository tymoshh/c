<nav>
  <link rel="stylesheet" href="https://cebularz7.w.staszic.waw.pl/c/styles.css">

  <div class="nav-left">
    <a href="https://cebularz7.w.staszic.waw.pl/c/home/">
      <img src="https://img.icons8.com/deco-glyph/48/FFFFFF/cottage.png" alt="home" />
    </a>
    <div class="nav-title">staszic casino</div>
  </div>

  <div class="nav-user">
    <a href="https://cebularz7.w.staszic.waw.pl/c/user/">
      <img src="https://img.icons8.com/glyph-neue/48/FFFFFF/user--v1.png" alt="user" />
    </a>
  </div>

  <!-- Placeholder for balance -->
  <div class="nav-balance" style="color: white; margin-left: auto; padding-right: 15px; font-weight: bold;"></div>
</nav>

<script>
  function getCookie(name) {
    const value = `; ${document.cookie}`;
    const parts = value.split(`; ${name}=`);
    if (parts.length === 2) return parts.pop().split(';').shift();
    return null;
  }

  const token = getCookie('token');
  const balanceDiv = document.querySelector('.nav-balance');

  if (token) {
    fetch('https://cebularz7.w.staszic.waw.pl/c/user/api.cgi', {
      method: 'POST',
      headers: {
        'Content-Type': 'application/json'
      },
      body: JSON.stringify({
        action: 'getbal',
        token: token
      })
    })
    .then(response => response.json())
    .then(data => {
      if (data && typeof data.balance !== 'undefined') {
        balanceDiv.textContent = data.balance + '$';
      } else {
        balanceDiv.textContent = 'nobal';
      }
    })
    .catch(() => {
      balanceDiv.textContent = 'nobal';
    });
  } else {
    balanceDiv.textContent = 'nobal';
  }
</script>
