<!-- âœ… This entire snippet can be injected with JS -->
<nav>
  <link rel="stylesheet" href="https://cebularz7.w.staszic.waw.pl/c/styles.css">

  <div class="nav-left">
    <a href="https://cebularz7.w.staszic.waw.pl/c/home/">
      <img src="https://img.icons8.com/deco-glyph/48/FFFFFF/cottage.png" alt="home" />
    </a>
    <div class="nav-title">staszic casino</div>
  </div>

  <div class="nav-user">
    <a href="https://cebularz7.w.staszic.waw.pl/c/user/">
      <img src="https://img.icons8.com/glyph-neue/48/FFFFFF/user--v1.png" alt="user" />
    </a>
  </div>

  <!-- Balance placeholder -->
  <div class="nav-balance" style="color: white; margin-left: auto; padding-right: 15px; font-weight: bold;"></div>
</nav>

<script>
  // ðŸ‘‡ Function must be called AFTER this HTML is injected into DOM
  function initBalance() {
    function getCookie(name) {
      const value = `; ${document.cookie}`;
      const parts = value.split(`; ${name}=`);
      if (parts.length === 2) return parts.pop().split(';').shift();
      return null;
    }

    const balanceDiv = document.querySelector('.nav-balance');
    const token = getCookie('token');

    if (!balanceDiv) {
      console.warn('[initBalance] .nav-balance not found!');
      return;
    }

    if (!token) {
      balanceDiv.textContent = 'no token - nobal';
      return;
    }

    fetch('https://cebularz7.w.staszic.waw.pl/c/user/api.cgi', {
      method: 'POST',
      headers: { 'Content-Type': 'application/json' },
      body: JSON.stringify({ action: 'getbal', token })
    })
    .then(res => res.json())
    .then(data => {
      balanceDiv.textContent = JSON.stringify(data, null, 2);
    })
    .catch(err => {
      balanceDiv.textContent = 'fetch error: ' + err;
    });
  }
</script>
